# Сервис обратной связи

Добро пожаловать в **Сервис обратной связи** — веб-приложение, разработанное для сотрудников организации, чтобы они могли предлагать свои идеи по улучшению работы компании. Приложение включает регистрацию пользователей с подтверждением по электронной почте, управление предложениями и административные функции.

## Основные возможности

### Для пользователей
- **Регистрация и авторизация**: Создание учетной записи с обязательным подтверждением через email и вход в систему.
- **Предложения**:
  - Создание новых предложений с возможностью прикрепления файлов (doc, docx, ppt, pptx, xls, xlsx, pdf).
  - Просмотр списка своих предложений.
  - Редактирование и удаление собственных предложений.
  - Возможность отправки анонимных предложений.
  - Скачивание прикрепленных файлов.

### Для администраторов
- **Управление пользователями**:
  - Просмотр списка пользователей.
  - Редактирование и удаление пользователей.
- **Управление получателями email**:
  - Просмотр, добавление, редактирование и удаление списка email-адресов для уведомлений.
- **Просмотр всех предложений**: Доступ к списку всех предложений с фильтрацией по отделам, статусам, датам и анонимности.
- **Экспорт данных**: Выгрузка списка предложений в формате XLS.

### Для сотрудников отделов
- Просмотр предложений, относящихся к их отделу.

## Технический стек
- **Фреймворк**: Django 5.0.5
- **Язык программирования**: Python 3.8+
- **База данных**: SQLite3
- **Шаблонизатор**: Django Templates
- **Статические файлы**: CSS, JavaScript
- **Работа с email**: Python `smtplib` с поддержкой SSL

## Требования для развертывания
- Python 3.8 или выше
- Git
- Виртуальное окружение (рекомендуется)

## Инструкция по развертыванию

### 1. Клонирование репозитория
Склонируйте репозиторий с проектом на свой компьютер:
```bash
git clone <ссылка_на_репозиторий>
cd <название_папки_проекта>
```

### 2. Создание виртуального окружения
Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
# Для Linux/Mac:
source venv/bin/activate
# Для Windows:
venv\Scripts\activate
```

### 3. Установка зависимостей
Установите все необходимые зависимости из файла `requirements.txt`:
```bash
pip install -r requirements.txt
```

### 4. Запуск сервера
Запустите локальный сервер разработки:
```bash
python manage.py runserver
```
Логин админа: admin , Пароль: 123

### 5. Доступ к приложению
Откройте браузер и перейдите по адресу:
```
http://127.0.0.1:8000/
```

## Дополнительные настройки

### Настройка email
Для отправки писем (подтверждение регистрации, уведомления) настройте параметры почтового сервера в файле `settings.py`:
- Откройте файл `airport/settings.py`.
- Найдите настройки SMTP (по умолчанию используется `192.168.0.1:465`):
  ```python
  smtp_server = "192.168.0.1"
  port = 465
  sender_email = "email@test.ru"
  password = "password"
  ```
- Замените их на данные вашего SMTP-сервера (например, Gmail, Яндекс.Почта и т.д.).

### Настройка медиафайлов
Для загрузки и хранения файлов:
- В `settings.py` убедитесь, что указаны параметры:
  ```python
  MEDIA_URL = '/media/'
  MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
  ```
- Убедитесь, что у Django есть права на запись в папку `media`.

## Структура проекта
- **`airport/`**: Основное приложение с настройками проекта.
  - `settings.py`: Конфигурация проекта.
  - `urls.py`: Маршруты URL.
  - `wsgi.py`: WSGI-приложение.
- **`feedback/`**: Приложение для работы с предложениями.
  - `models.py`: Модели `Feedback` (предложения) и `Recipient` (получатели email).
  - `forms.py`: Формы для ввода данных.
  - `views.py`: Логика обработки запросов.
  - `templates/`: HTML-шаблоны.
- **`users/`**: Приложение для управления пользователями.
  - `models.py`: Кастомная модель пользователя `User`.
  - `views.py`: Представления для работы с пользователями.
  - `templates/`: HTML-шаблоны.

## Особенности проекта
- Используется кастомная модель пользователя, наследуемая от `AbstractUser`.
- Поддержка анонимных предложений через флаг в форме.
- Уведомления о новых предложениях рассылаются на email из списка `Recipient`.
- Экспорт предложений в XLS доступен только администраторам.
